{"version":3,"sources":["tabTrace.js"],"names":["root","factory","define","amd","exports","module","tabTrace","global","window","this","selector","option_","charCodeAt","Error","targetLine","targetItem","itemList","document","querySelectorAll","len","length","line","createElement","firstItem","lastItem","parent","parentNode","option","height","bgColor","transitionTimeFun","transitionDuration","eventType","borderRadius","activeIndex","target","source","key","extend","setStyle","styles","style","getLeft","getBoundingClientRect","left","getRight","right","move","endEL","startEL","RelativeDistance","firstItemLeft","lastItemRight","item","parentWidth","itemWidth","distance","width","getComputedStyle","parseFloat","handleTrace","e","handleLeave","handleClick","i","color","resetColor","appendChild","position","backgroundColor","transition","bottom","addEventListener"],"mappings":"CAAA,SAAAA,EAAAC,GACA,mBAAAC,QAAAA,OAAAC,IACAD,OAAA,WACA,OAAAD,EAAAD,KAEA,iBAAAI,SAAA,oBAAAC,OACAA,OAAAD,QAAAH,EAAAD,GAEAA,EAAAM,SAAAL,EAAAD,GARA,CAUA,oBAAAO,OAAAA,OAAA,oBAAAC,OAAAA,OAAAC,KAAA,SAAAD,GA8IA,OA7IA,SAAAE,EAAAC,GACA,GAAA,KAAAD,EAAAE,WAAA,GACA,MAAA,IAAAC,MAAA,wCAEA,IA4EAC,EAAAC,EA5EAC,EAAAC,SAAAC,iBAAAR,GACAS,EAAAH,EAAAI,OACAC,EAAAJ,SAAAK,cAAA,OACAC,EAAAP,EAAA,GACAQ,EAAAR,EAAAG,EAAA,GACAM,EAAAF,EAAAG,WACAC,GACAC,OAAA,MACAC,QAAA,MACAC,kBAAA,cACAC,mBAAA,MACAC,UAAA,QACAC,aAAA,MACAC,YAAA,GAaAA,GADAP,EATA,SAAAQ,EAAAC,GAEA,IAAA,IAAAC,KADAD,EAAAA,MAEAD,EAAAE,GAAAD,EAAAC,GAEA,OAAAF,EAIAG,CAAAX,EAAAhB,IACAuB,YAEAK,EAAA,SAAAJ,EAAAK,GACA,IAAA,IAAAC,KAAAD,EACAL,EAAAM,MAAAA,GAAAD,EAAAC,GAEA,OAAAN,GAGAO,EAAA,SAAAP,GACA,OAAAA,EAAAQ,wBAAAC,MAGAC,EAAA,SAAAV,GACA,OAAAA,EAAAQ,wBAAAG,OAyBAC,EAAA,SAAAC,EAAAC,EAAA5B,GACA,IAhBA6B,EACAC,EACAC,EATAC,EACAC,EACAC,EAuBAC,EAFAd,EAAAM,GACAN,EAAAO,GAEAV,EAAAlB,GACAoC,OA3BAJ,EA2BAL,EA1BAM,EAAA9C,EAAAkD,iBAAAjC,GAAAgC,MACAF,EAAA/C,EAAAkD,iBAAAL,GAAAI,MACAE,WAAAJ,GAAAI,WAAAL,GAAA,IAAA,KAyBAV,MArBAM,EAqBAM,EApBAL,EAAAT,EAAAnB,GACA6B,EAAAP,EAAArB,IASA0B,IAHAC,EALAT,EAAAjB,IAKA,IACA2B,EALAP,EAAApB,IAKA,KAJAkC,WAAAnD,EAAAkD,iBAAAjC,GAAAgC,OAMA,IAAA,QA2CAG,EAAA,SAAAC,GACA,IAAA1B,EAAA0B,EAAA1B,OACAY,EAAAZ,EAAAZ,EAAAF,IAIAyC,EAAA,SAAAD,GACAA,EAAA1B,OACAY,EAAA/B,EAAAkB,GAAAX,EAAAF,IAIA0C,EAAA,SAAAF,GACA,IAAA1B,EAAA0B,EAAA1B,QAtBA,WACA,IAAA,IAAA6B,EAAA,EAAAA,EAAAhD,EAAAI,OAAA4C,IACAzB,EAAAvB,EAAAgD,IACAC,MAAA,KAoBAC,GACA3B,EAAAJ,GACA8B,MAAA,WAEAlB,EAAAZ,EAAAZ,EAAAF,IAMA,IApDAP,EAiDAO,EAjDAN,EAiDAC,EAAAkB,GAhDAT,EAAA0C,YAAArD,GACAyB,EAAAzB,GACAsD,SAAA,WACAxC,OAAAD,EAAAC,OACAyC,gBAAA1C,EAAAE,QACAyC,WAAA,OAAA3C,EAAAG,kBAAA,IAAAH,EAAAI,mBACAE,aAAAN,EAAAM,aACAsC,OAAA,MAEAhC,EAAAxB,GACAkD,MAAA,WAGAlB,EAAAhC,EAAAQ,EAAAT,GAsCAK,KACA,SAAAQ,EAAAK,UACAhB,EAAAG,GAAAqD,iBAAA,QAAAT,GACA,cAAApC,EAAAK,YACAhB,EAAAG,GAAAqD,iBAAA,aAAAZ,GACA5C,EAAAG,GAAAqD,iBAAA,aAAAV","file":"tabTrace.min.js","sourcesContent":["(function (root, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(function () {\r\n      return factory(root);\r\n    });\r\n  } else if (typeof exports === \"object\" && typeof module !== \"undefined\") {\r\n    module.exports = factory(root);\r\n  } else {\r\n    root.tabTrace = factory(root);\r\n  }\r\n})(typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : this, function (window) {\r\n  var tabTrace = function (selector, option_) {\r\n    if (selector.charCodeAt(0) !== 0x2E) {\r\n      throw new Error('The 1st parameter must be class name')\r\n    }\r\n    var itemList = document.querySelectorAll(selector)\r\n    var len = itemList.length\r\n    var line = document.createElement('div')\r\n    var firstItem = itemList[0]\r\n    var lastItem = itemList[len-1]\r\n    var parent = firstItem.parentNode\r\n    var option = {\r\n      height: '3px',\r\n      bgColor: 'red',\r\n      transitionTimeFun: 'ease-in-out',\r\n      transitionDuration: '.3s',\r\n      eventType: 'click',\r\n      borderRadius: '30%',\r\n      activeIndex: 0\r\n    }\r\n\r\n    var extend = function (target, source) {\r\n      source = source || {}\r\n      for (var key in source) {\r\n        target[key] = source[key]\r\n      }\r\n      return target\r\n    }\r\n\r\n    //mrege option\r\n    option = extend(option, option_)\r\n    var activeIndex = option.activeIndex\r\n\r\n    var setStyle = function (target, styles) {\r\n      for (var style in styles) {\r\n        target.style[style] = styles[style]\r\n      }\r\n      return target;\r\n    }\r\n\r\n    var getLeft = function (target) {\r\n      return target.getBoundingClientRect().left\r\n    }\r\n\r\n    var getRight = function (target) {\r\n      return target.getBoundingClientRect().right\r\n    }\r\n\r\n    var getWidthRelativePercentage = function (item) {\r\n      var parentWidth = window.getComputedStyle(parent).width\r\n      var itemWidth = window.getComputedStyle(item).width\r\n      var percentage = (parseFloat(itemWidth) / parseFloat(parentWidth)) * 100 + '%'\r\n      return percentage\r\n    }\r\n\r\n    var getLeftRelativePercentage = function (RelativeDistance) {\r\n      var firstItemLeft = getLeft(firstItem)\r\n      var lastItemRight = getRight(lastItem)\r\n      var parentLeft = getLeft(parent)\r\n      var parentRight = getRight(parent)\r\n      var parentWidth = parseFloat(window.getComputedStyle(parent).width)\r\n\r\n      //兼容x轴方向，父级元素的内部边距，item的外部边距\r\n      var leftGap = (firstItemLeft - parentLeft) || 0\r\n      var rightGap = (lastItemRight - parentRight) || 0  \r\n      var OffsetX = leftGap + rightGap\r\n      return (RelativeDistance + OffsetX)/ parentWidth * 100 + '%'\r\n    }\r\n\r\n  \r\n    var move = function (endEL, startEL, line) {\r\n      var end = getLeft(endEL)\r\n      var start = getLeft(startEL)\r\n      var distance = end - start\r\n      setStyle(line, {\r\n        width: getWidthRelativePercentage(endEL),\r\n        left: getLeftRelativePercentage(distance)\r\n      })\r\n    }\r\n\r\n\r\n    var initTrace = function (targetLine, targetItem) {\r\n      parent.appendChild(targetLine)\r\n      setStyle(targetLine, {\r\n        position: 'absolute',\r\n        height: option.height,\r\n        backgroundColor: option.bgColor,\r\n        transition: 'all ' + option.transitionTimeFun + ' ' + option.transitionDuration,\r\n        borderRadius: option.borderRadius,\r\n        bottom: '0'\r\n      })\r\n      setStyle(targetItem, {\r\n        color: 'purple'\r\n      })\r\n\r\n      move(targetItem, firstItem, targetLine)\r\n    }\r\n\r\n\r\n\r\n    var resetColor = function () {\r\n      for (var i = 0; i < itemList.length; i++) {\r\n        setStyle(itemList[i], {\r\n          color: ''\r\n        })\r\n      }\r\n    }\r\n\r\n\r\n    var handleTrace = function (e) {\r\n      var target = e.target\r\n      move(target, firstItem, line)\r\n    }\r\n\r\n\r\n    var handleLeave = function (e) {\r\n      var target = e.target\r\n      move(itemList[activeIndex], firstItem, line)\r\n    }\r\n\r\n\r\n    var handleClick = function (e) {\r\n      var target = e.target\r\n      resetColor()\r\n      setStyle(target, {\r\n        color: 'purple'\r\n      })\r\n      move(target, firstItem, line)\r\n    }\r\n\r\n    initTrace(line, itemList[activeIndex])\r\n\r\n\r\n    while (len--) {\r\n      if (option.eventType == 'click') {\r\n        itemList[len].addEventListener('click', handleClick)\r\n      } else if (option.eventType == 'mouseenter') {\r\n        itemList[len].addEventListener('mouseenter', handleTrace)\r\n        itemList[len].addEventListener('mouseleave', handleLeave)\r\n      }\r\n    }\r\n  }\r\n  return tabTrace;\r\n})"]}